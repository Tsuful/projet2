<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Globe News 3D</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: #0a0a0f;
            color: #e0e0e0;
            font-family: 'Segoe UI', system-ui, sans-serif;
            overflow: hidden;
            height: 100vh;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .ui-overlay {
            position: fixed;
            z-index: 10;
            pointer-events: none;
        }
        
        .ui-overlay > * {
            pointer-events: auto;
        }
        
        .title-bar {
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 1.2rem;
            font-weight: 300;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }
        
        .stats {
            font-size: 0.75rem;
            color: #666;
        }
        
        .news-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            max-height: 30vh;
            background: rgba(10, 10, 20, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            z-index: 10;
            overflow-y: auto;
            display: none;
        }
        
        .news-panel.active {
            display: block;
        }
        
        .news-panel h2 {
            font-size: 0.9rem;
            color: #00d4ff;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }
        
        .news-item {
            padding: 10px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border-left: 3px solid;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .news-item:hover {
            background: rgba(0, 212, 255, 0.1);
        }
        
        .news-item .tag {
            display: inline-block;
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 8px;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .tag-politics { background: #e74c3c; color: white; }
        .tag-tech { background: #9b59b6; color: white; }
        .tag-business { background: #f39c12; color: white; }
        .tag-sports { background: #27ae60; color: white; }
        .tag-science { background: #3498db; color: white; }
        .tag-health { background: #1abc9c; color: white; }
        .tag-entertainment { background: #e91e63; color: white; }
        .tag-general { background: #607d8b; color: white; }
        
        .news-item .title {
            font-size: 0.85rem;
            font-weight: 500;
            line-height: 1.4;
        }
        
        .news-item .meta {
            font-size: 0.7rem;
            color: #666;
            margin-top: 5px;
        }
        
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 100;
            text-align: center;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 212, 255, 0.2);
            border-top-color: #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .instructions {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 0.7rem;
            color: #444;
            text-align: right;
        }
        
        @media (max-width: 600px) {
            h1 { font-size: 0.9rem; }
            .news-panel { 
                max-height: 40vh;
                left: 10px;
                right: 10px;
                bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <div class="ui-overlay title-bar">
        <h1>Globe News</h1>
        <div class="stats" id="stats">50 nouvelles ¬∑ 24h</div>
    </div>
    
    <div class="news-panel" id="newsPanel">
        <h2>Actualit√©s en direct</h2>
        <div id="newsList"></div>
    </div>
    
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div>Chargement du globe...</div>
    </div>
    
    <div class="instructions">
        üñ±Ô∏è Drag to rotate ¬∑ üîç Scroll to zoom<br>
        üëÜ Tap markers for details
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Configuration
        const CONFIG = {
            globeRadius: 5,
            rotationSpeed: 0.001,
            markerSize: 0.15,
            autoRotate: true,
            maxNewsAge: 24 * 60 * 60 * 1000 // 24h
        };
        
        // Couleurs par tag
        const TAG_COLORS = {
            politics: 0xe74c3c,
            tech: 0x9b59b6,
            business: 0xf39c12,
            sports: 0x27ae60,
            science: 0x3498db,
            health: 0x1abc9c,
            entertainment: 0xe91e63,
            general: 0x607d8b
        };
        
        // Mock news data avec g√©olocalisation
        const NEWS_DATA = [
            { title: "Sommet mondial sur le climat √† Paris", tag: "politics", lat: 48.85, lng: 2.35, time: Date.now() - 2*3600000, source: "Reuters" },
            { title: "Nouvelle avanc√©e dans l'IA g√©n√©rative", tag: "tech", lat: 37.77, lng: -122.42, time: Date.now() - 4*3600000, source: "TechCrunch" },
            { title: "Bourse de Tokyo en forte hausse", tag: "business", lat: 35.68, lng: 139.69, time: Date.now() - 1*3600000, source: "Bloomberg" },
            { title: "Championnat du monde de football 2026", tag: "sports", lat: 40.71, lng: -74.01, time: Date.now() - 6*3600000, source: "ESPN" },
            { title: "D√©couverte majeure en astrophysique", tag: "science", lat: 51.51, lng: -0.13, time: Date.now() - 8*3600000, source: "Nature" },
            { title: "Pand√©mie grippale: nouvelles mesures", tag: "health", lat: 48.85, lng: 2.35, time: Date.now() - 3*3600000, source: "WHO" },
            { title: "Festival de Cannes announces s√©lection", tag: "entertainment", lat: 43.55, lng: 7.02, time: Date.now() - 5*3600000, source: "Variety" },
            { title: "√âlection pr√©sidentielle au Br√©sil", tag: "politics", lat: -15.78, lng: -47.93, time: Date.now() - 7*3600000, source: "BBC" },
            { title: "Lancement du nouveau smartphone Samsung", tag: "tech", lat: 37.57, lng: 126.98, time: Date.now() - 10*3600000, source: "The Verge" },
            { title: "Accord commercial UE-√âtats-Unis", tag: "business", lat: 50.85, lng: 4.35, time: Date.now() - 12*3600000, source: "FT" },
            { title: "Coupe du monde de rugby en France", tag: "sports", lat: 48.85, lng: 2.35, time: Date.now() - 9*3600000, source: "L'√âquipe" },
            { title: "Mission spatiale vers Mars", tag: "science", lat: 28.57, lng: -80.65, time: Date.now() - 11*3600000, source: "NASA" },
            { title: "Crise sanitaire en Afrique", tag: "health", lat: -1.29, lng: 36.82, time: Date.now() - 14*3600000, source: "CNN" },
            { title: "Oscars 2026: les nominations", tag: "entertainment", lat: 34.05, lng: -118.24, time: Date.now() - 15*3600000, source: "Hollywood" },
            { title: "Guerre en Ukraine: toujours aucune avanc√©e", tag: "politics", lat: 50.45, lng: 30.52, time: Date.now() - 16*3600000, source: "AP" },
            { title: "Apple pr√©sente ses nouvelles fonctionnalit√©s", tag: "tech", lat: 37.33, lng: -122.03, time: Date.now() - 18*3600000, source: "Wired" },
            { title: "P√©trole: les prix baissent", tag: "business", lat: 25.27, lng: 55.29, time: Date.now() - 20*3600000, source: "CNBC" },
            { title: "NBA: finale de conf√©rence", tag: "sports", lat: 41.88, lng: -87.63, time: Date.now() - 17*3600000, source: "Sportsnet" },
            { title: "D√©couverte d'une nouvelle plan√®te", tag: "science", lat: 34.05, lng: -118.24, time: Date.now() - 19*3600000, source: "Scientific American" },
            { title: "Vaccin contre le paludisme approved", tag: "health", lat: 52.37, lng: 4.90, time: Date.now() - 21*3600000, source: "The Lancet" },
            { title: "Festival de musique √† Berlin", tag: "entertainment", lat: 52.52, lng: 13.40, time: Date.now() - 22*3600000, source: "Billboard" },
            { title: "N√©gociations de paix au Moyen-Orient", tag: "politics", lat: 31.05, lng: 34.85, time: Date.now() - 23*3600000, source: "Al Jazeera" },
            { title: "Microsoft acquiert une startup fran√ßaise", tag: "tech", lat: 48.85, lng: 2.35, time: Date.now() - 2*3600000, source: "Le Monde" },
            { title: "Inflation en baisse en Europe", tag: "business", lat: 52.37, lng: 13.40, time: Date.now() - 13*3600000, source: "Reuters" },
            { title: "Tour de France: √©tape reine", tag: "sports", lat: 45.76, lng: 4.83, time: Date.now() - 4*3600000, source: "EuroSport" },
            { title: "√ânergie solaire: record de production", tag: "science", lat: 33.75, lng: -84.39, time: Date.now() - 6*3600000, source: "Science Daily" },
            { title: "Nouveau traitement contre le cancer", tag: "health", lat: 51.51, lng: -0.13, time: Date.now() - 8*3600000, source: "BMJ" },
            { title: "Blockbuster movie breaks records", tag: "entertainment", lat: 40.71, lng: -74.01, time: Date.now() - 10*3600000, source: "IMDb" },
            { title: "R√©union du G20 √† New Delhi", tag: "politics", lat: 28.61, lng: 77.21, time: Date.now() - 12*3600000, source: "The Hindu" },
            { title: "Tesla pr√©sente son nouveau mod√®le", tag: "tech", lat: 37.77, lng: -122.42, time: Date.now() - 14*3600000, source: "Electrek" },
            { title: "Cryptomonnaies: le Bitcoinmonte", tag: "business", lat: 40.71, lng: -74.01, time: Date.now() - 16*3600000, source: "CoinDesk" },
            { title: "Euro 2026: les qualifi√©s", tag: "sports", lat: 41.90, lng: 12.50, time: Date.now() - 18*3600000, source: "UEFA" },
            { title: "T√©lescope James Webb: nouvelles images", tag: "science", lat: 28.39, lng: -80.60, time: Date.now() - 20*3600000, source: "NASA" },
            { title: "Grippe saisonni√®re: campagne de vaccination", tag: "health", lat: 45.50, lng: -73.57, time: Date.now() - 22*3600000, source: "CDC" },
            { title: "Prix Nobel de litt√©rature", tag: "entertainment", lat: 59.33, lng: 18.07, time: Date.now() - 23*3600000, source: "Nobel" },
            { title: "Conflit en Palestine: tr√™ve possible", tag: "politics", lat: 31.35, lng: 34.30, time: Date.now() - 1*3600000, source: "UN News" },
            { title: "Nvidia bat tous les records", tag: "tech", lat: 37.77, lng: -122.42, time: Date.now() - 3*3600000, source: "Bloomberg" },
            { title: "L'√©conomie chinoise ralentit", tag: "business", lat: 39.90, lng: 116.41, time: Date.now() - 5*3600000, source: "SCMP" },
            { title: "F1: Grand Prix de Monaco", tag: "sports", lat: 43.74, lng: 7.43, time: Date.now() - 7*3600000, source: "F1" },
            { title: "Fusion nucleaire: perc√©e historique", tag: "science", lat: 34.05, lng: -118.24, time: Date.now() - 9*3600000, source: "Physics Today" },
            { title: "WHO declare fin de urgence mondiale", tag: "health", lat: 47.37, lng: 8.55, time: Date.now() - 11*3600000, source: "WHO" },
            { title: "Concert historique √† Londres", tag: "entertainment", lat: 51.50, lng: -0.12, time: Date.now() - 13*3600000, source: "NME" },
            { title: "Sommet NATO √† Washington", tag: "politics", lat: 38.91, lng: -77.04, time: Date.now() - 15*3600000, source: "NATO" },
            { title: "5G: d√©ploiement mondial", tag: "tech", lat: 35.68, lng: 139.69, time: Date.now() - 17*3600000, source: "ZDNet" },
            { title: "March√©s asiatiques: tendance mixte", tag: "business", lat: 31.23, lng: 121.47, time: Date.now() - 19*3600000, source: "Nikkei" },
            { title: "Jeux Olympiques: pr√©paration Paris", tag: "sports", lat: 48.85, lng: 2.35, time: Date.now() - 21*3600000, source: "Olympics" },
            { title: "IA: nouvelles r√©gulations europ√©ennes", tag: "science", lat: 50.85, lng: 4.35, time: Date.now() - 23*3600000, source: "EU Commission" },
            { title: "Sant√© mentale: rapport mondial", tag: "health", lat: 48.85, lng: 2.35, time: Date.now() - 2*3600000, source: "WHO" },
            { title: "Streaming: nouvelles plateformes", tag: "entertainment", lat: 37.77, lng: -122.42, time: Date.now() - 4*3600000, source: "Hollywood Reporter" },
            { title: "√âlections europ√©ennes", tag: "politics", lat: 50.85, lng: 4.35, time: Date.now() - 6*3600000, source: "Euronews" }
        ];
        
        // Three.js setup
        let scene, camera, renderer, globe, markers = [];
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let targetRotation = { x: 0, y: 0 };
        let currentRotation = { x: 0, y: 0 };
        
        function init() {
            // Scene
            scene = new THREE.Scene();
            
            // Camera
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 15;
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            // Globe (wireframe sphere)
            const geometry = new THREE.SphereGeometry(CONFIG.globeRadius, 36, 24);
            const material = new THREE.MeshBasicMaterial({
                color: 0x00d4ff,
                wireframe: true,
                transparent: true,
                opacity: 0.4
            });
            globe = new THREE.Mesh(geometry, material);
            scene.add(globe);
            
            // Inner globe (dark)
            const innerGeo = new THREE.SphereGeometry(CONFIG.globeRadius * 0.98, 36, 24);
            const innerMat = new THREE.MeshBasicMaterial({
                color: 0x050510,
                transparent: true,
                opacity: 0.95
            });
            const innerGlobe = new THREE.Mesh(innerGeo, innerMat);
            scene.add(innerGlobe);
            
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);
            
            // Add markers
            addMarkers();
            
            // Events
            setupEvents();
            
            // Hide loading
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('newsPanel').classList.add('active');
            }, 1000);
            
            // Start animation
            animate();
        }
        
        function latLngToVector3(lat, lng, radius) {
            const phi = (90 - lat) * (Math.PI / 180);
            const theta = (lng + 180) * (Math.PI / 180);
            
            const x = -radius * Math.sin(phi) * Math.cos(theta);
            const y = radius * Math.cos(phi);
            const z = radius * Math.sin(phi) * Math.sin(theta);
            
            return new THREE.Vector3(x, y, z);
        }
        
        function addMarkers() {
            NEWS_DATA.forEach((news, index) => {
                const position = latLngToVector3(news.lat, news.lng, CONFIG.globeRadius + 0.1);
                
                const markerGeo = new THREE.SphereGeometry(CONFIG.markerSize, 8, 8);
                const color = TAG_COLORS[news.tag] || TAG_COLORS.general;
                const markerMat = new THREE.MeshBasicMaterial({ color: color });
                const marker = new THREE.Mesh(markerGeo, markerMat);
                
                marker.position.copy(position);
                marker.userData = { newsIndex: index };
                
                globe.add(marker);
                markers.push(marker);
            });
        }
        
        function setupEvents() {
            const canvas = renderer.domElement;
            
            // Mouse/Touch events for rotation
            canvas.addEventListener('mousedown', onPointerDown);
            canvas.addEventListener('mousemove', onPointerMove);
            canvas.addEventListener('mouseup', onPointerUp);
            canvas.addEventListener('mouseleave', onPointerUp);
            
            canvas.addEventListener('touchstart', onPointerDown);
            canvas.addEventListener('touchmove', onPointerMove);
            canvas.addEventListener('touchend', onPointerUp);
            
            // Click for markers
            canvas.addEventListener('click', onClick);
            canvas.addEventListener('touchend', onClick);
            
            // Scroll for zoom
            canvas.addEventListener('wheel', onWheel);
            
            // Resize
            window.addEventListener('resize', onResize);
        }
        
        function onPointerDown(e) {
            isDragging = true;
            CONFIG.autoRotate = false;
            const pos = e.touches ? e.touches[0] : e;
            previousMousePosition = { x: pos.clientX, y: pos.clientY };
        }
        
        function onPointerMove(e) {
            if (!isDragging) return;
            
            const pos = e.touches ? e.touches[0] : e;
            const deltaX = pos.clientX - previousMousePosition.x;
            const deltaY = pos.clientY - previousMousePosition.y;
            
            targetRotation.y += deltaX * 0.005;
            targetRotation.x += deltaY * 0.005;
            
            // Clamp vertical rotation
            targetRotation.x = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, targetRotation.x));
            
            previousMousePosition = { x: pos.clientX, y: pos.clientY };
        }
        
        function onPointerUp() {
            isDragging = false;
        }
        
        function onClick(e) {
            if (isDragging) return;
            
            const pos = e.changedTouches ? e.changedTouches[0] : e;
            const mouse = new THREE.Vector2(
                (pos.clientX / window.innerWidth) * 2 - 1,
                -(pos.clientY / window.innerHeight) * 2 + 1
            );
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(markers);
            
            if (intersects.length > 0) {
                const marker = intersects[0].object;
                const newsIndex = marker.userData.newsIndex;
                showNewsDetails(newsIndex);
            }
        }
        
        function onWheel(e) {
            e.preventDefault();
            camera.position.z += e.deltaY * 0.01;
            camera.position.z = Math.max(8, Math.min(30, camera.position.z));
        }
        
        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function showNewsDetails(index) {
            const news = NEWS_DATA[index];
            const newsList = document.getElementById('newsList');
            
            newsList.innerHTML = `
                <div class="news-item" style="background: rgba(0, 212, 255, 0.15); border-left-color: #00d4ff;">
                    <span class="tag tag-${news.tag}">${news.tag}</span>
                    <div class="title">${news.title}</div>
                    <div class="meta">${news.source} ¬∑ ${getTimeAgo(news.time)}</div>
                </div>
            `;
        }
        
        function getTimeAgo(timestamp) {
            const diff = Date.now() - timestamp;
            const hours = Math.floor(diff / 3600000);
            if (hours < 1) return "√Ä l'instant";
            if (hours === 1) return "Il y a 1h";
            return `Il y a ${hours}h`;
        }
        
        function renderNewsList() {
            const newsList = document.getElementById('newsList');
            const now = Date.now();
            
            const recentNews = NEWS_DATA.filter(n => now - n.time < CONFIG.maxNewsAge);
            
            newsList.innerHTML = recentNews.map((news, i) => `
                <div class="news-item" data-index="${i}">
                    <span class="tag tag-${news.tag}">${news.tag}</span>
                    <div class="title">${news.title}</div>
                    <div class="meta">${news.source} ¬∑ ${getTimeAgo(news.time)}</div>
                </div>
            `).join('');
            
            // Add click handlers
            document.querySelectorAll('.news-item').forEach(item => {
                item.addEventListener('click', () => {
                    const idx = parseInt(item.dataset.index);
                    // Find the actual news in filtered list
                    const news = recentNews[idx];
                    const realIndex = NEWS_DATA.indexOf(news);
                    showNewsDetails(realIndex);
                });
            });
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // Auto rotation
            if (CONFIG.autoRotate && !isDragging) {
                globe.rotation.y += CONFIG.rotationSpeed;
            }
            
            // Smooth rotation
            if (isDragging) {
                currentRotation.x += (targetRotation.x - currentRotation.x) * 0.1;
                currentRotation.y += (targetRotation.y - currentRotation.y) * 0.1;
                globe.rotation.x = currentRotation.x;
                globe.rotation.y = currentRotation.y;
            }
            
            // Pulse markers
            const time = Date.now() * 0.002;
            markers.forEach((marker, i) => {
                const scale = 1 + Math.sin(time + i) * 0.2;
                marker.scale.setScalar(scale);
            });
            
            renderer.render(scene, camera);
        }
        
        // Init
        init();
        renderNewsList();
    </script>
</body>
</html>
